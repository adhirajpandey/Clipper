<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Clipper</title>
    </head>
    <body style="text-align: center;">
        <script>
            const BASE_BACKEND_URL = "http://localhost:8000/"

            async function sendClipboardData() {
                const clipboardText = document.getElementById("paste-area").value

                const payload = {
                    "clipboardText": clipboardText
                }

                const response = await fetch(BASE_BACKEND_URL + "save", {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                    },
                    body: JSON.stringify(payload),
                  })
              
                const result = await response.json()
                console.log(result.clip.clipId)

                document.getElementById("output-div").innerHTML = ""

                const outputElem = document.createElement("div");

                outputElem.innerHTML = `Your clip is available at: <a href="${window.location.origin}/${result.clip.clipId}" target="_blank">${window.location.origin}/${result.clip.clipId}</a>`;
                document.getElementById("output-div").appendChild(outputElem)
            }
        </script>
        <h2 style="text-align: center;">Clipper - Online Clipboard</h2>
        <textarea style="width: 80vw; height: 70vh" id="paste-area" cols="120" rows="10" placeholder="Paste your text here..."></textarea>
        <br><br>
        <button style="text-align: center;" onclick="sendClipboardData()">Save Text</button>
        <br><br>
        <div id="output-div"></div>
    </body>
</html>